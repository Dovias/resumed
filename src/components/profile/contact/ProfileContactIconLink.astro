---
import type {ProfileContactEntry} from "../../../profile";

import Link from "../../text/Link.astro";

export interface Props extends ProfileContactEntry {}

const {icon, url, ...props} = Astro.props;

let target, rel;
if (props.newInstance) {
  target = "_blank";
  rel = "noopener noreferrer";
}

let linkText = props.label;
const href = url.toString();

if (props.label == undefined) {
  linkText = href.substring(url.protocol.length);
  if (linkText.startsWith("//")) {
    linkText = linkText.substring(2);
  }
}
---

<div class="profile-contact-link">
  <picture class="profile-contact-link__icon">
    <source srcset={icon.path} />
    <img alt={icon.description} width="12" class="profile-contact-link__icon__image"/>
  </picture>
  <Link importance="medium" {href} {target} {rel}>{linkText}</Link>
</div>

<style lang="scss" is:global>
  @use "../../../style/mixins/compound/panel";
  @use "../../../style/mixins/margin";


  .profile-contact-link {
    text-wrap: nowrap;

    &__icon {
      @include panel.content($contour_shadow_size_name: "small", $color_variant_name: "secondary");
      @include margin.right("small");

      display: inline-block;
      vertical-align: middle;

      &__image {
        display: block;
      }
    }
  }
</style>
