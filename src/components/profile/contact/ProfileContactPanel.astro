---
import type {Profile} from "../../../profile";

import VCardQRCode from "../../vcard/VCardQRCode.astro";
import ProfileContactIconLink, {type Props as ProfileContactIconLinkProps} from "./ProfileContactIconLink.astro";
import ProfileArticlePanel from "../ProfileArticlePanel.astro";
import Paragraph from "../../text/Paragraph.astro";

export type Props = Pick<Profile, "names"> & Pick<Profile["contact"], "label" | "qr"> & {
  "links": ProfileContactIconLinkProps[];
};

const {names, links, label, qr} = Astro.props;
---

<ProfileArticlePanel label={label} accent="secondary">
  {qr.enabled &&
      <div class="contact-qr">
        <VCardQRCode {names} urls={links.map(link => link.url)} />
        <Paragraph importance="low"><em>{qr.description}</em></Paragraph>
      </div>
  }
  
  <div class="contact-links">    
    {links.length > 0 && links.map(linkProps =>
      <ProfileContactIconLink {...linkProps}/>
    )}
  </div>
</ProfileArticlePanel>

<style lang="scss" is:global>
  @use "../../../style/mixins/contour";
  @use "../../../style/mixins/padding";
  @use "../../../style/mixins/margin";

  .contact-qr {
    @include contour.border("medium", "large", "dashed");
    @include padding.all("large");

    text-align: center;
  }

  .contact-links {
    @include margin.all("medium", "none");

    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(14rem, 1fr));
    gap: 0.5em;
  }
</style>